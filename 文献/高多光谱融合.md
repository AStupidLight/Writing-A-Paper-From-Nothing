高光谱图像具有窄而连续的光谱特征，但是缺少空间信息（HS的传感器为了保证更高的信噪比从而在更大的空间尺度上面去获得，从而在光谱信息上有着更多对于不同材料的混合）。多光谱图像具有较少的光谱特征，但是具有更多的纹理和几何特征。

所以我们需要去“超分辨率”，达到空间和光谱分辨率双高的效果。



pan-sharpening全色锐化：

高分辨率全色图像与（低分辨率多光谱or低分辨率高光谱）图像的融合

# 分类

高多光谱融合具有细节注入法、模型优化法和深度学习方法。深度学习的方法可以分为有监督和无监督方式。

## 有监督

在有监督网络当中，我们需要构建一对样本和标签。我们使用已有的高光谱图像来作为参考图像，再对其采用空间和光谱降采样（decimate）的方法来获得大量的低空间高光谱和高空间多光谱数据集。



Wald‘s protocol 沃尔德协议

LRHS是由HRHS做spatially blurring得来的，HRMS是由HRHS做spectrally down-sampling

### 单流网络

单流网络通常对两种模态的数据直接concat，忽略了两种数据之间的差异。

 [Palsson 等 - 2017 - Multispectral and hyperspectral image fusion using.pdf](D:\Papers\storage\K3MFEH2F\Palsson 等 - 2017 - Multispectral and hyperspectral image fusion using.pdf) 

这篇文章所提到的单流网络，输入为512x480x102（pavia）的HS图像，生成的MS图像是512x480x4的MS图像，以及一个128x120x102的HS图像。通过高HS图像来生成MS图像和更小的HS图像。

通过捕获HS图像的传感器的RGB和NIR波段的光谱响应曲线来获取MS图像。用一种特定的滤波器按照4倍的方式抽取HS图像。



 [Han 和 Chen - 2019 - Deep residual network of spectral and spatial fusi.pdf](D:\Papers\storage\QINIFV9T\Han 和 Chen - 2019 - Deep residual network of spectral and spatial fusi.pdf) 

对于尺寸较小的LR-HS直接直接做上采样，使其达到与HR-RGB图像达到相同的尺寸。

用双三次插值法（bicubic interpolation）获得LR-HS图像，用摄像头的光谱响应函数来从HS图像获取到RGB图像。



### 多流网络

多流网络用两种不同的子网络来分别提取两种数据的信息。

 [Han 等 - 2019 - Multi-level and multi-scale spatial and spectral f.pdf](D:\Papers\storage\T2Z2XBGW\Han 等 - 2019 - Multi-level and multi-scale spatial and spectral f.pdf) 

多流多尺度。

逐步减少RGB图像的特征图的大小，逐步增加HS图像的尺度。



两条路径 ：一条路径用来采集HR-RGB图像的空间信息，一条路径用来采集光谱信息

![image-20240728115818820](C:/Users/lenovo/AppData/Roaming/Typora/typora-user-images/image-20240728115818820.png)



利用![image-20240728120029810](C:/Users/lenovo/AppData/Roaming/Typora/typora-user-images/image-20240728120029810.png)

来生成WxXxC的一个目标HS图像

其中，小w和小h必须是W和H的2的指数分之一。

上面一条路径不断做2倍的下采样，下面一条路径不断做2倍的上采样。

 [Xu 等 - 2020 - HAM-MFN Hyperspectral and multispectral image mul.pdf](D:\Papers\storage\RSBXAK4K\Xu 等 - 2020 - HAM-MFN Hyperspectral and multispectral image mul.pdf) 

由于普遍使用MSE损失函数有问题，会导致生成的图片blurry



CBR Layer-卷积+batch Normalize+带权ReLU

在设计的上面借鉴了GoogleNet，最终尺寸不变

![image-20240728124222233](C:/Users/lenovo/AppData/Roaming/Typora/typora-user-images/image-20240728124222233.png)



pixel Shuffle ：

![image-20240728124422780](C:/Users/lenovo/AppData/Roaming/Typora/typora-user-images/image-20240728124422780.png)

用一种特定的公示来变换张量。在这之中spatial的尺寸将增大。在这之后再加一个大小为1的卷积核来讲channel上减小的数字回复

Fusion Layer：直接做element wise的相加。如果其中一个比较大，就先down-sample（插值）到我们期待的尺寸

![image-20240728123821178](C:/Users/lenovo/AppData/Roaming/Typora/typora-user-images/image-20240728123821178.png)

在这个示例当中，H=4h，所以只需要两个block。在最开始的时候使用两个Initial CBR block 来让两个cube的channel数字相等（C）。最后使用一个1x1xb的层将channel数字变回来。

最后输出output的时候，使用一个skip connection直接输出

 [Zhou 等 - 2019 - Pyramid fully convolutional network for hyperspect.pdf](D:\Papers\storage\F9YLWFXP\Zhou 等 - 2019 - Pyramid fully convolutional network for hyperspect.pdf) 



![image-20240729110156157](C:/Users/lenovo/AppData/Roaming/Typora/typora-user-images/image-20240729110156157.png)

encoder 里卷积不改变尺寸，maxpool=2\*2

1*1conv 来讲HRMS的channel数字增大，DeConv来增大一倍图像的尺寸

#### 注意力

 [Yang 等 - 2019 - Hyperspectral And Multispectral Image Fusion Based.pdf](D:\Papers\storage\MUKIDSYZ\Yang 等 - 2019 - Hyperspectral And Multispectral Image Fusion Based.pdf) 

引入注意力的原因：高频信息在低通滤波下采样的过程中被丢失

![image-20240729113716328](C:/Users/lenovo/AppData/Roaming/Typora/typora-user-images/image-20240729113716328.png)

U-net+attention

 [Hu 等 - 2022 - Hyperspectral Image Super-Resolution via Deep Spat.pdf](D:\Papers\storage\D8GS5M3P\Hu 等 - 2022 - Hyperspectral Image Super-Resolution via Deep Spat.pdf) 



![image-20240729114458702](C:/Users/lenovo/AppData/Roaming/Typora/typora-user-images/image-20240729114458702.png)

MSI图像的第一个Downsample使用一个6\*6的卷积核来让尺寸缩小四倍

pixelShuffle的作用：用一种特殊的卷积方式来在上采样的过程中收获到更多的细节

图片上可以显示出注意力的大小